webpackJsonp([0],{"/bIL":function(e,s,t){"use strict";var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"container"},[t("div",{staticClass:"name"},[t("h3",[e._v("Name："+e._s(e.userName))]),e._v(" "),t("div",{staticClass:"reset",on:{click:function(s){e.setName()}}},[e._v("Reset Name")])]),e._v(" "),t("div",{staticClass:"chatRoom"},[e._m(0),e._v(" "),t("div",{staticClass:"roomBody",attrs:{id:"js-roomBody"}},[e._l(e.messages,function(s){return[s.userName!=e.userName?[t("div",{staticClass:"messageBox"},[t("img",{staticClass:"messageBox__user",attrs:{src:"https://lorempixel.com/40/40/",draggable:"false"}}),e._v(" "),t("div",{staticClass:"messageBox__content"},[t("div",{staticClass:"messageBox__name"},[e._v(e._s(s.userName))]),e._v(" "),"text"==s.type?t("div",{staticClass:"messageBox__message"},[e._v(e._s(s.message))]):e._e(),e._v(" "),"image"==s.type?t("div",{staticClass:"messageBox__image"},[t("img",{attrs:{src:s.message}})]):e._e()]),e._v(" "),t("div",{staticClass:"messageBox__time"},[e._v(e._s(s.timeStamp))])])]:e._e(),e._v(" "),s.userName==e.userName?[t("div",{staticClass:"messageBox messageBox--self"},[t("div",{staticClass:"messageBox__time"},[e._v(e._s(s.timeStamp))]),e._v(" "),t("div",{staticClass:"messageBox__content"},["text"==s.type?t("div",{staticClass:"messageBox__message"},[e._v(e._s(s.message))]):e._e(),e._v(" "),"image"==s.type?t("div",{staticClass:"messageBox__image"},[t("img",{attrs:{src:s.message}})]):e._e()])])]:e._e()]}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.upload,expression:"upload"}],staticClass:"messageBox messageBox--self"},[t("div",{staticClass:"messageBox__progress"},[t("div",{staticClass:"messageBox__progress--state",attrs:{id:"js-progressBar"}}),e._v(" "),t("div",{staticClass:"messageBox__progress--number"},[e._v(e._s(e.progress))])])])],2),e._v(" "),t("div",{staticClass:"roomBottom",class:{disable:!e.userName}},[t("div",{staticClass:"roomBottom__tools"},[t("div",{staticClass:"roomBottom__tools_upload"},[t("input",{attrs:{type:"file",accept:"image/*"},on:{change:function(s){e.sendImage(s)}}}),e._v(" "),t("img",{attrs:{src:"https://firebasestorage.googleapis.com/v0/b/develop-1ef65.appspot.com/o/icon_file.png?alt=media&token=43967f13-ff65-4e3f-872b-684b0bd8f76a"}})])]),e._v(" "),t("div",{staticClass:"roomBottom__input"},[t("textarea",{staticClass:"roomBottom__input__textarea",class:{disable:!e.userName},attrs:{id:"js-message"},on:{keydown:function(s){if(!("button"in s)&&e._k(s.keyCode,"enter",13))return null;e.sendMessage(s)}}})])])]),e._v(" "),t("div",{staticClass:"modal",attrs:{id:"js-modal"}},[t("div",{staticClass:"modal__container"},[e._m(1),e._v(" "),t("div",{staticClass:"modal__body"},[t("input",{staticClass:"userName",attrs:{type:"text",id:"js-userName",maxlength:"6"},on:{"keydown.":function(s){if(!("button"in s)&&e._k(s.keyCode,"enter",13))return null;e.saveName()}}}),e._v(" "),t("div",{staticClass:"button",on:{click:function(s){e.saveName()}}},[e._v("設定")])]),e._v(" "),t("footer",{staticClass:"modal__footer"})])])])},o=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"roomHead"},[t("div",{staticClass:"roomHead__topButtons"},[t("div",{staticClass:"roomHead__button close"}),e._v(" "),t("div",{staticClass:"roomHead__button minimize"}),e._v(" "),t("div",{staticClass:"roomHead__button zoom"})]),e._v(" "),t("img",{staticClass:"roomHead__img",attrs:{src:"https://lorempixel.com/50/50/",draggable:"false"}}),e._v(" "),t("div",{staticClass:"roomHead__title"},[e._v("Test Room")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("header",{staticClass:"modal__header"},[t("h2",{staticClass:"view-title"},[e._v("輸入名稱")])])}],i={render:a,staticRenderFns:o};s.a=i},Cl4r:function(e,s){},Ds4J:function(e,s,t){"use strict";var a=firebase.database().ref("/messages/"),o=firebase.storage().ref("/images/");s.a={name:"ChatRoom",data:function(){return{userName:"",messages:[],upload:!1,progress:""}},methods:{setName:function(){document.querySelector("#js-modal").style.display="block"},saveName:function(){var e=this,s=document.querySelector("#js-userName").value;""!=s.trim()&&(e.userName=s,document.querySelector("#js-modal").style.display="none")},getTime:function(){var e=new Date,s=e.getHours(),t=e.getMinutes();return(s>=12?"下午":"上午")+" "+s+":"+(t<10?"0"+t:t)},sendMessage:function(e){var s=this,t=document.querySelector("#js-userName"),o=document.querySelector("#js-message");return!e.shiftKey&&(o.value.length<=1&&""==o.value.trim()?(e.preventDefault(),!1):(a.push({userName:t.value,type:"text",message:o.value,timeStamp:s.getTime()}),o.value="",void e.preventDefault()))},sendImage:function(e){var s=this,t=document.querySelector("#js-userName"),i=e.target.files[0],r={contentType:"image/*"},n=o.child("images/"+i.name).put(i,r),m=document.querySelector("#js-progressBar");n.on(firebase.storage.TaskEvent.STATE_CHANGED,function(e){var t=Math.floor(e.bytesTransferred/e.totalBytes*100);t<100&&(s.upload=!0,s.progress=t+"%",m.setAttribute("style","width:"+t+"%"))},function(e){a.child("bug/").push({userName:t.value,type:"image",message:e.code,timeStamp:s.getTime()})},function(){var e=n.snapshot.downloadURL;a.push({userName:t.value,type:"image",message:e,timeStamp:s.getTime()}),s.upload=!1})}},mounted:function(){var e=this;a.on("value",function(s){var t=s.val();e.messages=t})},updated:function(){var e=document.querySelector("#js-roomBody");e.scrollTop=e.scrollHeight}}},M93x:function(e,s,t){"use strict";function a(e){t("Cl4r")}var o=t("xJD8"),i=t("U9jt"),r=t("VU/8"),n=a,m=r(o.a,i.a,n,null,null);s.a=m.exports},NHnr:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("7+uW"),o=t("M93x"),i=t("YaEn");a.a.config.productionTip=!1,new a.a({el:"#app",router:i.a,template:"<App/>",components:{App:o.a}})},RFZe:function(e,s,t){"use strict";function a(e){t("b3Qj")}var o=t("Ds4J"),i=t("/bIL"),r=t("VU/8"),n=a,m=r(o.a,i.a,n,"data-v-d66600dc",null);s.a=m.exports},U9jt:function(e,s,t){"use strict";var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},o=[],i={render:a,staticRenderFns:o};s.a=i},YaEn:function(e,s,t){"use strict";var a=t("7+uW"),o=t("/ocq"),i=t("RFZe");a.a.use(o.a),s.a=new o.a({routes:[{path:"/",name:"ChatRoom",component:i.a}]})},b3Qj:function(e,s){},xJD8:function(e,s,t){"use strict";s.a={name:"app"}}},["NHnr"]);
//# sourceMappingURL=app.4fa33c21b7c0b38896f8.js.map